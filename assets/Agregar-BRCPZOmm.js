import{r as m,j as e}from"./index-frXugXEz.js";import{a as b,e as p}from"./endpoints-C5U9E4-a.js";import{u as y}from"./useForm-HIuAdX9p.js";import{C as E,a}from"./CRow-CKmBaWJd.js";import{C as S,a as v}from"./CCardBody-D7q5mcpW.js";import{C as R}from"./CCardHeader-CGTkrN9q.js";import{C as c}from"./CAlert-CWNHSOST.js";import{C as N}from"./CForm-BS5WwWej.js";import{C as t}from"./CFormInput-D8FpbnyA.js";import{a as _}from"./index.esm-BaRdIac2.js";import"./DefaultLayout-C8rcfdlm.js";import"./cil-user-Dlmw-Gem.js";import"./softys-8HeVkQ7R.js";import"./CFormControlWrapper-D55qbkDT.js";import"./CFormControlValidation-B-uT9q7Z.js";import"./CFormLabel-oWPOUdtY.js";const k=()=>{const h=`${p.API_BASE_URL}${p.ENDPOINTS.STORES.CREATE}`,g={name:"",ruc:"",address:"",latitude:"",longitude:"",phone:"",max_radius:25,image:null},[u,l]=m.useState(""),[x,n]=m.useState(""),[j,i]=m.useState([]),{formData:o,handleChange:s,handleSubmit:C,resetForm:f}=y(g,async d=>{try{const r=await b.post(h,d);r.data.success?(l(r.data.message),n(""),i([]),f()):(n(r.data.message),i(r.data.errors||[]),l(""))}catch(r){r.response?(n(r.response.data.message),i(r.response.data.errors||[])):(n("Error al crear la categoría: "+r.message),i([])),l(""),console.error("Error al crear la categoría:",r)}},"tienda_img");return e.jsx(E,{children:e.jsx(a,{xs:12,children:e.jsxs(S,{className:"mb-4",children:[e.jsx(R,{children:e.jsx("small",{children:"Registrar nueva tienda"})}),e.jsxs(v,{children:[u&&e.jsx(c,{color:"success",children:u}),x&&e.jsxs(e.Fragment,{children:[e.jsx(c,{color:"danger",children:x}),e.jsx(c,{color:"danger",children:e.jsx("ul",{children:j.map((d,r)=>e.jsx("li",{children:d.msg},r))})})]}),e.jsxs(N,{className:"row g-3",onSubmit:C,children:[e.jsx(a,{md:6,children:e.jsx(t,{type:"text",label:"Nombre",id:"name",value:o.name,onChange:s,placeholder:"Nombre de la tienda",autoComplete:"off",required:!0})}),e.jsx(a,{md:6,children:e.jsx(t,{type:"text",label:"RUC",id:"ruc",value:o.ruc,onChange:s,maxLength:20,required:!0})}),e.jsx(a,{md:6,children:e.jsx(t,{type:"text",label:"Dirección",id:"address",value:o.address,onChange:s,maxLength:20,required:!0})}),e.jsx(a,{md:6,children:e.jsx(t,{type:"text",label:"Teléfono",id:"phone",value:o.phone,onChange:s})}),e.jsx(a,{md:2,sm:6,children:e.jsx(t,{type:"number",label:"Latitud",id:"latitude",value:o.latitude,onChange:s,placeholder:"-12.04318",step:"any",min:"-90",max:"90"})}),e.jsx(a,{md:2,sm:6,children:e.jsx(t,{type:"number",label:"Longitud",id:"longitude",value:o.longitude,onChange:s,placeholder:"-77.02824",step:"any",min:"-180",max:"180"})}),e.jsx(a,{md:2,sm:6,children:e.jsx(t,{type:"number",label:"Radio máximo",id:"max_radius",value:o.max_radius,onChange:s,step:"any",min:"0",max:"180"})}),e.jsx(a,{md:6,children:e.jsx(t,{type:"file",label:"Imagen",id:"image",onChange:s,accept:"image/*",required:!0})}),e.jsx(a,{xs:12,children:e.jsx(_,{color:"primary",type:"submit",children:"Guardar"})})]})]})]})})})};export{k as default};
