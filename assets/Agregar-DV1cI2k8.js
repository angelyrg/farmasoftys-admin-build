import{r as n,j as r}from"./index-BbdSqWC9.js";import{a as E,e as p}from"./endpoints-BX9h9ZCO.js";import{u as S}from"./useForm-DQbrfayh.js";import{C as y,a as o}from"./CRow-DX7WfHcK.js";import{C as b,a as A}from"./CCardBody-B-X9cGRP.js";import{C as R}from"./CCardHeader-DLbDbJrL.js";import{C as c}from"./CAlert-DnvX20Lt.js";import{C as D}from"./CForm-BsUL6XdD.js";import{C as g}from"./CFormInput-DDUSGyiz.js";import{a as F}from"./index.esm-DCg1vWKa.js";import"./DefaultLayout-BuKkoChH.js";import"./cil-user-Dlmw-Gem.js";import"./softys-8HeVkQ7R.js";import"./CFormControlWrapper-CSgDey9a.js";import"./CFormControlValidation-La-DNwq6.js";import"./CFormLabel-Bi_OkBaw.js";const Y=()=>{const x=`${p.API_BASE_URL}${p.ENDPOINTS.CATEGORY.CREATE}`,u={description:"",image:null},[m,t]=n.useState(""),[l,s]=n.useState(""),[C,a]=n.useState([]),{formData:h,handleChange:d,handleSubmit:j,resetForm:f}=S(u,async i=>{try{const e=await E.post(x,i);e.data.success?(t(e.data.message),s(""),a([]),f()):(s(e.data.message),a(e.data.errors||[]),t(""))}catch(e){e.response?(s(e.response.data.message),a(e.response.data.errors||[])):(s("Error al crear la categoría: "+e.message),a([])),t(""),console.error("Error al crear la categoría:",e)}},"category_image");return r.jsx(y,{children:r.jsx(o,{xs:12,children:r.jsxs(b,{className:"mb-4",children:[r.jsx(R,{children:r.jsx("small",{children:"Registrar nueva categoría"})}),r.jsxs(A,{children:[m&&r.jsx(c,{color:"success",children:m}),l&&r.jsxs(r.Fragment,{children:[r.jsx(c,{color:"danger",children:l}),r.jsx(c,{color:"danger",children:r.jsx("ul",{children:C.map((i,e)=>r.jsx("li",{children:i.msg},e))})})]}),r.jsxs(D,{className:"row g-3",onSubmit:j,children:[r.jsx(o,{md:12,children:r.jsx(g,{type:"text",label:"Descripción",id:"description",value:h.description,onChange:d,required:!0})}),r.jsx(o,{md:6,children:r.jsx(g,{type:"file",label:"Imagen",id:"image",onChange:d,required:!0})}),r.jsx(o,{xs:12,children:r.jsx(F,{color:"primary",type:"submit",children:"Guardar"})})]})]})]})})})};export{Y as default};
