import{r as n,j as s,P as c}from"./index-BOhTwHsC.js";import{R as I}from"./react-paginate-CnSu5TAu.js";import{c as w}from"./index.esm-DVdv_w6Z.js";import{C as M}from"./CFormInput-BKq-2Q75.js";import{C as V,a as q,b as j,c as B,d as F,e as D}from"./CTable-DrtmPXdZ.js";import{a as H,c as A}from"./cil-chevron-right-DSvcss7_.js";const O=({columns:d=[],data:p=[],searchKeys:i=[],itemsPerPage:u=10,sortDirection:h="desc",defaultSortKey:x})=>{const[g,R]=n.useState(""),[m,N]=n.useState(0),[t,v]=n.useState({key:null,direction:h}),b=n.useMemo(()=>p.filter(e=>i.some(r=>{const a=f(e,r);return a==null?void 0:a.toString().toLowerCase().includes(g.toLowerCase())})),[p,g,i]);n.useEffect(()=>{N(0)},[g]);const L=n.useMemo(()=>{if(!t.key)return b;const e=[...b];return e.sort((r,a)=>{const o=f(r,t.key),l=f(a,t.key);if(o==null)return 1;if(l==null)return-1;if(!isNaN(o)&&!isNaN(l))return t.direction==="asc"?Number(o)-Number(l):Number(l)-Number(o);const y=new Date(o),k=new Date(l);if(!isNaN(y)&&!isNaN(k))return t.direction==="asc"?y-k:k-y;const T=o.toString().toLowerCase(),S=l.toString().toLowerCase();return T<S?t.direction==="asc"?-1:1:T>S?t.direction==="asc"?1:-1:0}),e},[b,t]);n.useEffect(()=>{x&&v({key:x,direction:h})},[x,h]);const P=Math.ceil(L.length/u),C=L.slice(m*u,(m+1)*u);n.useEffect(()=>{C.length===0&&m>0&&N(0)},[C.length,m]);const E=e=>{v(r=>({key:e,direction:r.key===e&&r.direction==="asc"?"desc":"asc"}))};return s.jsxs(s.Fragment,{children:[s.jsx(M,{type:"text",placeholder:"Buscar...",className:"mb-3",value:g,onChange:e=>R(e.target.value)}),s.jsxs(V,{striped:!0,hover:!0,responsive:!0,bordered:!0,children:[s.jsx(q,{children:s.jsx(j,{children:d.map(e=>s.jsx(B,{onClick:()=>E(e.key),style:{cursor:"pointer",verticalAlign:"middle"},children:s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsx("span",{children:e.label}),t.key===e.key&&s.jsx("span",{children:t.direction==="asc"?"↑":"↓"})]})},e.key))})}),s.jsx(F,{children:C.length>0?C.map((e,r)=>s.jsx(j,{children:d.map(a=>s.jsx(D,{children:a.render?a.render(e):f(e,a.key)},a.key))},r)):s.jsx(j,{children:s.jsx(D,{colSpan:d.length,className:"text-center text-muted",children:"No se encontraron registros."})})})]}),s.jsx("div",{className:"d-flex justify-content-center mt-3",children:s.jsx(I,{previousLabel:s.jsx(w,{icon:A}),nextLabel:s.jsx(w,{icon:H}),breakLabel:"...",pageCount:P,marginPagesDisplayed:2,pageRangeDisplayed:5,onPageChange:({selected:e})=>N(e),forcePage:m,containerClassName:"pagination",pageClassName:"page-item",pageLinkClassName:"page-link",previousClassName:"page-item",previousLinkClassName:"page-link",nextClassName:"page-item",nextLinkClassName:"page-link",breakClassName:"page-item",breakLinkClassName:"page-link",activeClassName:"active"})})]})},f=(d,p)=>p.split(".").reduce((i,u)=>i==null?void 0:i[u],d);O.propTypes={data:c.array.isRequired,columns:c.array.isRequired,itemsPerPage:c.number,searchKeys:c.array,sortDirection:c.oneOf(["asc","desc"]),defaultSortKey:c.string};export{O as T};
