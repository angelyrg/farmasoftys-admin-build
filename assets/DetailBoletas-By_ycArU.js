import{r as t,u as g,j as s,L as E}from"./index-frXugXEz.js";import{a as N,e as f}from"./endpoints-C5U9E4-a.js";import{c as _}from"./index.esm-BaRdIac2.js";import{C as v,a as C}from"./CRow-CKmBaWJd.js";import{c as y}from"./cil-arrow-circle-left-Bp7VjLH0.js";import{C as B,a as S}from"./CCardBody-D7q5mcpW.js";import{C as T}from"./CCardHeader-CGTkrN9q.js";import{C as L,a as I,b as d,c as x,d as w,e as c}from"./CTable-D2fS4PVd.js";function R({boleta_id:n,fecha:l,img_boleta:h,productos:o}){return s.jsx("div",{className:"card rounded-2",children:s.jsxs("div",{className:"card-body",children:[s.jsxs("div",{className:"d-flex justify-content-between",children:[s.jsxs("div",{children:[s.jsxs("span",{className:"badge bg-info rounded-pill",children:["B-",n]}),s.jsxs("span",{children:["ðŸ“…",l]})]}),s.jsx("div",{children:"ðŸ“·"})]}),s.jsx("div",{children:s.jsxs(L,{striped:!0,responsive:!0,small:!0,children:[s.jsx(I,{children:s.jsxs(d,{children:[s.jsx(x,{scope:"col",children:"Producto"}),s.jsx(x,{scope:"col",children:"Cantidad"}),s.jsx(x,{scope:"col",children:"ComisiÃ³n"})]})}),s.jsx(w,{children:o&&o.length>0?o.map(e=>s.jsxs(d,{children:[s.jsx(c,{children:e.marca_detalle}),s.jsx(c,{children:e.cantidad}),s.jsxs(c,{children:["S/ ",e.comision.toFixed(2)]})]},`${e.id}-${e.marca_detalle}`)):s.jsx(d,{children:s.jsx(c,{colSpan:"4",className:"text-center",children:"No hay productos."})})})]})})]})})}const U=()=>{const n=`${f.API_BASE_URL}${f.ENDPOINTS.BOLETAS.GETBYUSER}`,[l,h]=t.useState([]),[o,e]=t.useState(!0),[j,i]=t.useState(null),b=g(),{user:m}=b.state||{},p=m.id||0,u=t.useCallback(async()=>{const a={user_id:p,order:"desc"};try{const r=await N.get(n,{params:a});r.data.success?h(r.data.data):i(r.data.message)}catch(r){r.response&&r.response.status===404?i("Este usuario no tiene boletas"):i("Error al obtener los datos")}finally{e(!1)}},[n,p]);return t.useEffect(()=>{u()},[u]),o?s.jsx("p",{children:"Cargando..."}):s.jsx(s.Fragment,{children:s.jsxs(v,{children:[s.jsx(C,{xs:12,className:"mb-3",children:s.jsxs(E,{to:"/usuarios/lista",className:"btn btn-primary",children:[s.jsx(_,{icon:y})," Volver"]})}),s.jsx(C,{xs:12,children:s.jsxs(B,{className:"mb-4",children:[s.jsxs(T,{children:[s.jsx("strong",{children:m.fullname})," - ",s.jsx("small",{children:"Boletas"})]}),s.jsx(S,{children:j?s.jsx("p",{children:j}):s.jsxs(s.Fragment,{children:[s.jsx("p",{children:"Lista de boletas"}),s.jsx("div",{className:"d-flex flex-column gap-3",children:l&&l.length>0?l.map(a=>s.jsx(R,{boleta_id:a.id_boleta,fecha:a.fecha_registro,img_boleta:a.img_boleta,productos:a.productos},`${a.id_boleta}`)):s.jsx("p",{children:"Este usuario no tiene boletas"})})]})})]})})]})})};export{U as default};
