import{o as h,r as a,j as e}from"./index-BOhTwHsC.js";import{a as b,e as n}from"./endpoints-CS5nTNlK.js";import{a as j,c as y}from"./index.esm-DVdv_w6Z.js";import"./react-paginate-CnSu5TAu.js";import{T as g}from"./TablaCoreUI-C0N1yp5E.js";import{M as E}from"./ModalConfirmaciónEliminación-CftZkWG8.js";import{C as S,a as k}from"./CRow-DiePAMTK.js";import{C as I,a as v}from"./CCardBody-MXlmbL9P.js";import{C as L}from"./CCardHeader-DMR-Y4ve.js";import{b as N}from"./DefaultLayout-D6kBYcTj.js";import"./CFormInput-BKq-2Q75.js";import"./CFormControlWrapper-C92rYEwl.js";import"./CFormControlValidation-Ck9L-Gmv.js";import"./CFormLabel-CpYCFpvI.js";import"./CTable-DrtmPXdZ.js";import"./cil-chevron-right-DSvcss7_.js";import"./CModalHeader-Cywm-KxM.js";import"./CModalTitle-C9QoWCw2.js";import"./cil-user-Dlmw-Gem.js";import"./softys-8HeVkQ7R.js";const J=()=>{const m=h(),r=`${n.API_BASE_URL}${n.ENDPOINTS.USERS.GET}`,[c,d]=a.useState([]),[p,u]=a.useState(!0),[t,o]=a.useState(null),[i,f]=a.useState({visible:!1,type:null,user:null}),l=a.useCallback(async()=>{try{const s=await b.get(r);s.data.success?d(s.data.data):o(s.data.message)}catch{o("Error al obtener los datos")}finally{u(!1)}},[r]);a.useEffect(()=>{l()},[l]);const x=[{key:"id",label:"ID"},{key:"fullname",label:"Nombres y apellidos"},{key:"phone",label:"Teléfono"},{key:"email",label:"Email"},{key:"tienda.name",label:"Tienda"},{key:"fecha",label:"Fecha de registro",render:s=>new Date(s.createdAt).toLocaleString("es-PE",{timeZone:"America/Lima"})},{key:"acciones",label:"Opciones",render:s=>e.jsx(e.Fragment,{children:e.jsxs(j,{color:"info",size:"sm",className:"d-flex gap-1 align-items-center",onClick:()=>{m(`/usuarios/boletas/${s.id}`,{state:{user:s}})},children:[e.jsx(y,{icon:N}),e.jsx("span",{children:"Ver boletas"})]})})}],C=()=>{f({visible:!1,type:null,user:null})};return p?e.jsx("p",{children:"Cargando..."}):t?e.jsxs("p",{children:["Error: ",t]}):e.jsxs(e.Fragment,{children:[e.jsx(S,{children:e.jsx(k,{xs:12,children:e.jsxs(I,{className:"mb-4",children:[e.jsxs(L,{children:[e.jsx("strong",{children:"Usuarios"})," ",e.jsx("small",{children:"Listar"})]}),e.jsx(v,{children:e.jsx(g,{itemsPerPage:15,columns:x,data:c,searchKeys:["fullname","phone","email","tienda.name"],defaultSortKey:"id"})})]})})}),i.type==="delete"&&e.jsx(E,{visible:i.visible,onClose:C,onConfirm:handleDelete})]})};export{J as default};
