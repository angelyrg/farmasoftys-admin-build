import{j as e,P as a,r}from"./index-BOhTwHsC.js";import{a as S,e as u}from"./endpoints-CS5nTNlK.js";import{a as f,c as E}from"./index.esm-DVdv_w6Z.js";import{T as D}from"./TablaCoreUI-C0N1yp5E.js";import{C as I,a as B,b as M,c as T}from"./CModalHeader-Cywm-KxM.js";import{I as k,b as L}from"./DefaultLayout-D6kBYcTj.js";import{C as O,a as P}from"./CRow-DiePAMTK.js";import{C as _,a as N}from"./CCardBody-MXlmbL9P.js";import{C as R}from"./CCardHeader-DMR-Y4ve.js";import"./react-paginate-CnSu5TAu.js";import"./CFormInput-BKq-2Q75.js";import"./CFormControlWrapper-C92rYEwl.js";import"./CFormControlValidation-Ck9L-Gmv.js";import"./CFormLabel-CpYCFpvI.js";import"./CTable-DrtmPXdZ.js";import"./cil-chevron-right-DSvcss7_.js";import"./cil-user-Dlmw-Gem.js";import"./softys-8HeVkQ7R.js";const x=({visible:o,onClose:t,boleta:l})=>e.jsxs(I,{size:"lg",visible:o,onClose:t,children:[e.jsx(B,{children:"Detalles de la boleta"}),e.jsx(M,{children:e.jsx(k,{src:l.img_boleta,className:"img-fluid"})}),e.jsx(T,{children:e.jsx(f,{color:"secondary",onClick:t,children:"Cerrar"})})]});x.propTypes={visible:a.bool.isRequired,onClose:a.func.isRequired,boleta:a.shape({id:a.oneOfType([a.number,a.string]),img_boleta:a.oneOfType([a.string,a.object])}).isRequired};const ee=()=>{const o=`${u.API_BASE_URL}${u.ENDPOINTS.BOLETAS.GET}`,[t,l]=r.useState([]),[C,h]=r.useState(!0),[i,n]=r.useState(null),[c,d]=r.useState(!1),[j,m]=r.useState(null),p=r.useCallback(async()=>{try{const s=await S.get(o);s.data.success?l(s.data.data):n(s.data.message)}catch{n("Error al obtener los datos")}finally{h(!1)}},[o]);r.useEffect(()=>{p()},[p]);const b=[{key:"id",label:"ID"},{key:"user",label:"Usuario",render:s=>s.user.fullname},{key:"comision_total",label:"ComisiÃ³n",render:s=>e.jsxs("span",{children:["S/ ",s.comision_total]})},{key:"fecha",label:"Fecha de registro",render:s=>new Date(s.createdAt).toLocaleString("es-PE",{timeZone:"America/Lima"})},{key:"acciones",label:"Opciones",render:s=>e.jsx("div",{className:"d-flex gap-2",children:e.jsxs(f,{color:"light",className:"d-flex gap-1 align-items-center",onClick:()=>g(s),children:[e.jsx(E,{icon:L}),e.jsx("span",{children:"Ver boleta"})]})})}],g=(s=null)=>{d(!0),m(s)},y=()=>{d(!1),m(null)};return C?e.jsx("p",{children:"Cargando..."}):i?e.jsxs("p",{children:["Error: ",i]}):e.jsxs(e.Fragment,{children:[e.jsx(O,{children:e.jsx(P,{xs:12,children:e.jsxs(_,{className:"mb-4",children:[e.jsxs(R,{children:[e.jsx("strong",{children:"Boletas"})," ",e.jsx("small",{children:"Listar"})]}),e.jsx(N,{children:e.jsx(D,{itemsPerPage:15,columns:b,data:t,searchKeys:["user.fullname","comision_total"],defaultSortKey:"id"})})]})})}),c&&e.jsx(x,{visible:c,onClose:y,boleta:j})]})};export{ee as default};
