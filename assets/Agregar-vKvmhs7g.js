import{r as s,j as e}from"./index-BSGErEM6.js";import{a as f,e as d}from"./endpoints-FQ_58ef9.js";import{u as A}from"./useForm-BeavesDu.js";import{C as R,a as t}from"./CRow-DmcC_b5O.js";import{C as q,a as D}from"./CCardBody-BoIb-BeF.js";import{C as F}from"./CCardHeader-BjtyZ_kD.js";import{C as g}from"./CAlert-DQ7iv2zy.js";import{C as N}from"./CForm-DQ0aLtLk.js";import{C as T}from"./CFormSelect-DaFDZk8m.js";import{C as i}from"./CFormInput-DjsZBaJT.js";import{a as M}from"./index.esm-DHIEEdvX.js";import"./DefaultLayout-ClxKSXA3.js";import"./cil-user-Dlmw-Gem.js";import"./softys-8HeVkQ7R.js";import"./CFormControlWrapper-BV3MrKMS.js";import"./CFormControlValidation-DsORKtit.js";import"./CFormLabel-CnIyLzqE.js";const ee=()=>{const u=`${d.API_BASE_URL}${d.ENDPOINTS.CATEGORY.GET}`,[p,y]=s.useState([]),[P,E]=s.useState(!0),[w,C]=s.useState(null),x=s.useCallback(async()=>{try{const r=await f.get(u);r.data.success?y(r.data.data):C(r.data.message)}catch{C("Error al obtener las categorías")}finally{E(!1)}},[u]);s.useEffect(()=>{x()},[x]);const S=`${d.API_BASE_URL}${d.ENDPOINTS.PRODUCTS.CREATE}`,_={category_id:0,sector_general:"",sector_detallado:"",marca_detalle:"",comision:"",image:null},[h,m]=s.useState(""),[j,n]=s.useState(""),[b,c]=s.useState([]),{formData:l,handleChange:o,handleSubmit:I,resetForm:v}=A(_,async r=>{try{const a=await f.post(S,r);a.data.success?(m(a.data.message),n(""),c([]),v()):(n(a.data.message),c(a.data.errors||[]),m(""))}catch(a){a.response?(n(a.response.data.message),c(a.response.data.errors||[])):(n("Error al crear la categoría: "+a.message),c([])),m(""),console.error("Error al crear la categoría:",a)}},"imagen_sku");return e.jsx(R,{children:e.jsx(t,{xs:12,children:e.jsxs(q,{className:"mb-4",children:[e.jsx(F,{children:e.jsx("small",{children:"Registrar nuevo producto"})}),e.jsxs(D,{children:[h&&e.jsx(g,{color:"success",children:h}),j&&e.jsxs(e.Fragment,{children:[e.jsx(g,{color:"danger",children:j}),e.jsx(g,{color:"danger",children:e.jsx("ul",{children:b.map((r,a)=>e.jsx("li",{children:r.msg},a))})})]}),e.jsxs(N,{className:"row g-3",onSubmit:I,children:[e.jsx(t,{md:6,children:e.jsxs(T,{"aria-label":"Categoría",id:"category_id",label:"Categoría",value:l.category_id,onChange:o,required:!0,children:[e.jsx("option",{value:"",children:"Selecciona una categoría"}),p&&p.map(r=>e.jsx("option",{value:r.id,children:r.description},r.id))]})}),e.jsx(t,{md:6,children:e.jsx(i,{type:"text",label:"Sector general",id:"sector_general",value:l.sector_general,onChange:o,required:!0})}),e.jsx(t,{md:6,children:e.jsx(i,{type:"text",label:"Sector detallado",id:"sector_detallado",value:l.sector_detallado,onChange:o,required:!0})}),e.jsx(t,{md:6,children:e.jsx(i,{type:"text",label:"Marca detallado",id:"marca_detalle",value:l.marca_detalle,onChange:o,required:!0})}),e.jsx(t,{md:6,children:e.jsx(i,{type:"number",step:.01,label:"Comisión",id:"comision",value:l.comision,onChange:o,required:!0})}),e.jsx(t,{md:6,children:e.jsx(i,{type:"file",label:"Imagen",id:"image",onChange:o,required:!0})}),e.jsx(t,{xs:12,children:e.jsx(M,{color:"primary",type:"submit",children:"Guardar"})})]})]})]})})})};export{ee as default};
