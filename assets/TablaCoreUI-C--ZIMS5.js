import{r as n,j as s,P as o}from"./index-KRR1voBs.js";import{R as E}from"./react-paginate-CyfXF6zb.js";import{c as T}from"./index.esm-2SyroXAh.js";import{C as I}from"./CFormInput-C1jpBkWS.js";import{C as D,a as M,b as y,c as V,d as q,e as S}from"./CTable-ftmU2Ut3.js";import{a as B,c as F}from"./cil-chevron-right-DSvcss7_.js";const H=({columns:l=[],data:p=[],searchKeys:i=[],itemsPerPage:c=10,sortDirection:C="desc",defaultSortKey:h})=>{const[m,R]=n.useState(""),[d,x]=n.useState(0),[t,k]=n.useState({key:null,direction:C}),f=n.useMemo(()=>p.filter(e=>i.some(r=>{const a=u(e,r);return a==null?void 0:a.toString().toLowerCase().includes(m.toLowerCase())})),[p,m,i]);n.useEffect(()=>{x(0)},[m]);const j=n.useMemo(()=>{if(!t.key)return f;const e=[...f];return e.sort((r,a)=>{var v,L;const b=((v=u(r,t.key))==null?void 0:v.toString().toLowerCase())||"",N=((L=u(a,t.key))==null?void 0:L.toString().toLowerCase())||"";return b<N?t.direction==="asc"?-1:1:b>N?t.direction==="asc"?1:-1:0}),e},[f,t]);n.useEffect(()=>{h&&k({key:h,direction:C})},[h,C]);const w=Math.ceil(j.length/c),g=j.slice(d*c,(d+1)*c);n.useEffect(()=>{g.length===0&&d>0&&x(0)},[g.length,d]);const P=e=>{k(r=>({key:e,direction:r.key===e&&r.direction==="asc"?"desc":"asc"}))};return s.jsxs(s.Fragment,{children:[s.jsx(I,{type:"text",placeholder:"Buscar...",className:"mb-3",value:m,onChange:e=>R(e.target.value)}),s.jsxs(D,{striped:!0,hover:!0,responsive:!0,bordered:!0,children:[s.jsx(M,{children:s.jsx(y,{children:l.map(e=>s.jsx(V,{onClick:()=>P(e.key),style:{cursor:"pointer",verticalAlign:"middle"},children:s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsx("span",{children:e.label}),t.key===e.key&&s.jsx("span",{children:t.direction==="asc"?"↑":"↓"})]})},e.key))})}),s.jsx(q,{children:g.length>0?g.map((e,r)=>s.jsx(y,{children:l.map(a=>s.jsx(S,{children:a.render?a.render(e):u(e,a.key)},a.key))},r)):s.jsx(y,{children:s.jsx(S,{colSpan:l.length,className:"text-center text-muted",children:"No se encontraron registros."})})})]}),s.jsx("div",{className:"d-flex justify-content-center mt-3",children:s.jsx(E,{previousLabel:s.jsx(T,{icon:F}),nextLabel:s.jsx(T,{icon:B}),breakLabel:"...",pageCount:w,marginPagesDisplayed:2,pageRangeDisplayed:5,onPageChange:({selected:e})=>x(e),forcePage:d,containerClassName:"pagination",pageClassName:"page-item",pageLinkClassName:"page-link",previousClassName:"page-item",previousLinkClassName:"page-link",nextClassName:"page-item",nextLinkClassName:"page-link",breakClassName:"page-item",breakLinkClassName:"page-link",activeClassName:"active"})})]})},u=(l,p)=>p.split(".").reduce((i,c)=>i==null?void 0:i[c],l);H.propTypes={data:o.array.isRequired,columns:o.array.isRequired,itemsPerPage:o.number,searchKeys:o.array,sortDirection:o.oneOf(["asc","desc"]),defaultSortKey:o.string};export{H as T};
