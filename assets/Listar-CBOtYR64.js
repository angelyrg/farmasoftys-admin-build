import{o as P,r as a,j as e}from"./index-D_GdLVNr.js";import{a as S,e as h}from"./endpoints-C5U9E4-a.js";import{a as T,c as t}from"./index.esm-DRk_pvbg.js";import{R}from"./react-paginate-D-XeyCIx.js";import{M as D}from"./ModalConfirmaciónEliminación-C_9p0V_F.js";import{C as I,a as w}from"./CRow-Cvk70ulk.js";import{C as M,a as A}from"./CCardBody-CBjSyW9A.js";import{C as B}from"./CCardHeader-BuFN-RW-.js";import{C as U,a as H,b as u,c as r,d as $,e as l}from"./CTable-DKOopARd.js";import{b as F}from"./DefaultLayout-BL0ILRaz.js";import{a as _,c as z}from"./cil-chevron-right-DSvcss7_.js";import"./CModalTitle-ChiwV2rl.js";import"./cil-user-Dlmw-Gem.js";import"./softys-8HeVkQ7R.js";const re=()=>{const g=P(),i=`${h.API_BASE_URL}${h.ENDPOINTS.USERS.GET}`,[n,j]=a.useState([]),[f,b]=a.useState(!0),[c,d]=a.useState(null),[m,N]=a.useState({visible:!1,type:null,user:null}),[k,v]=a.useState(0),o=7,p=k*o,L=n.slice(p,p+o),C=Math.ceil(n.length/o),E=s=>{v(s.selected)},x=a.useCallback(async()=>{try{const s=await S.get(i);s.data.success?j(s.data.data):d(s.data.message)}catch{d("Error al obtener los datos")}finally{b(!1)}},[i]);a.useEffect(()=>{x()},[x]);const y=()=>{N({visible:!1,type:null,user:null})};return f?e.jsx("p",{children:"Cargando..."}):c?e.jsxs("p",{children:["Error: ",c]}):e.jsxs(e.Fragment,{children:[e.jsx(I,{children:e.jsx(w,{xs:12,children:e.jsxs(M,{className:"mb-4",children:[e.jsxs(B,{children:[e.jsx("strong",{children:"Usuarios"})," ",e.jsx("small",{children:"Listar"})]}),e.jsxs(A,{children:[e.jsxs(U,{striped:!0,responsive:!0,children:[e.jsx(H,{children:e.jsxs(u,{children:[e.jsx(r,{scope:"col",children:"ID"}),e.jsx(r,{scope:"col",children:"Nombres y apellidos"}),e.jsx(r,{scope:"col",children:"Teléfono"}),e.jsx(r,{scope:"col",children:"Email"}),e.jsx(r,{scope:"col",children:"Tienda"}),e.jsx(r,{scope:"col",children:"Fecha de registro"})]})}),e.jsx($,{children:L.map(s=>e.jsxs(u,{children:[e.jsx(r,{scope:"row",children:s.id}),e.jsx(l,{children:s.fullname}),e.jsx(l,{children:s.phone}),e.jsx(l,{children:s.email}),e.jsx(l,{children:s.tienda.name}),e.jsx(l,{children:new Date(s.createdAt).toLocaleString("es-PE",{timeZone:"America/Lima"})}),e.jsx(l,{children:e.jsxs(T,{color:"info",size:"sm",className:"me-2",onClick:()=>{g(`/usuarios/boletas/${s.id}`,{state:{user:s}})},children:[e.jsx(t,{icon:F})," Ver boletas"]})})]},s.id))})]}),C>1&&e.jsx(R,{previousLabel:e.jsx(t,{icon:z}),nextLabel:e.jsx(t,{icon:_}),breakLabel:"...",breakClassName:"page-item",breakLinkClassName:"page-link",pageCount:C,marginPagesDisplayed:2,pageRangeDisplayed:5,onPageChange:E,containerClassName:"pagination justify-content-center",pageClassName:"page-item",pageLinkClassName:"page-link",previousClassName:"page-item",previousLinkClassName:"page-link",nextClassName:"page-item",nextLinkClassName:"page-link",activeClassName:"active",disabledClassName:"disabled"})]})]})})}),m.type==="delete"&&e.jsx(D,{visible:m.visible,onClose:y,onConfirm:handleDelete})]})};export{re as default};
