import{R as t,r as m,j as a,L as i}from"./index-BOhTwHsC.js";import{a as v,e as C}from"./endpoints-CS5nTNlK.js";import{C as A}from"./index.esm-Bfll81w-.js";import{c as o}from"./index.esm-DVdv_w6Z.js";import{C as p,a as r}from"./CRow-DiePAMTK.js";import{C as n}from"./CWidgetStatsF-B24DoxXh.js";import{c as R,a as V,b as _}from"./DefaultLayout-D6kBYcTj.js";import{c as d}from"./cil-arrow-right-CuetXaPY.js";import{c as U}from"./cil-user-Dlmw-Gem.js";import{C as F,a as I}from"./CCardBody-MXlmbL9P.js";import{C as L}from"./CCardHeader-DMR-Y4ve.js";import"./CCardFooter-N8Yn0iCR.js";import"./softys-8HeVkQ7R.js";const aa=()=>{const x=`${C.API_BASE_URL}${C.ENDPOINTS.DASHBOARD.GET}`,[h,u]=t.useState(null),[b,j]=t.useState(0),[g,N]=t.useState(0),[E,T]=t.useState(0),[y,B]=t.useState(0),[l,w]=t.useState([]),[H,D]=t.useState({}),[S,P]=t.useState({}),k=m.useCallback(async()=>{try{const s=await v.get(x);s.data.success?(j(s.data.data.productos),N(s.data.data.tiendas),T(s.data.data.boletas),B(s.data.data.users),w(s.data.data.boletas_por_tienda)):u(s.data.message)}catch(s){console.error(s),u("Error al obtener los datos")}},[x]);return m.useEffect(()=>{k()},[]),m.useEffect(()=>{if(l.length){const s=l.map(e=>e.name),f=l.map(e=>e.boletas_count),c=["#003C71","#005A9C","#0086C9","#00ADEF","#66C7E8","#E6E6E6"];P({labels:s,datasets:[{data:f,label:"Boletas por tienda",backgroundColor:c,hoverBackgroundColor:c.map(e=>e+"CC")}]}),D({labels:s,datasets:[{data:f,backgroundColor:c,hoverBackgroundColor:c.map(e=>e+"CC")}]})}},[l]),a.jsxs(a.Fragment,{children:[h&&a.jsx("div",{className:"alert alert-danger",children:h}),a.jsxs(p,{children:[a.jsx(r,{sm:6,xl:4,xxl:3,children:a.jsx(n,{className:"mb-3",color:"info",footer:a.jsxs(i,{to:"/products/lista",className:"font-weight-bold font-xs text-body-secondary",children:["Ver todos",a.jsx(o,{icon:d,className:"float-end",width:16})]}),icon:a.jsx(o,{icon:R,height:24}),title:"Productos",value:b})}),a.jsx(r,{sm:6,xl:4,xxl:3,children:a.jsx(n,{className:"mb-3",color:"primary",footer:a.jsxs(i,{to:"/tiendas/lista",className:"font-weight-bold font-xs text-body-secondary",children:["Ver todos",a.jsx(o,{icon:d,className:"float-end",width:16})]}),icon:a.jsx(o,{icon:V,height:24}),title:"Tiendas",value:g})}),a.jsx(r,{sm:6,xl:4,xxl:3,children:a.jsx(n,{className:"mb-3",color:"success",footer:a.jsxs(i,{to:"/boletas/lista",className:"font-weight-bold font-xs text-body-secondary",children:["Ver todos",a.jsx(o,{icon:d,className:"float-end",width:16})]}),icon:a.jsx(o,{icon:_,height:24}),title:"Ventas realizadas",value:E})}),a.jsx(r,{sm:6,xl:4,xxl:3,children:a.jsx(n,{className:"mb-3",color:"warning",footer:a.jsxs(i,{to:"/usuarios/lista",className:"font-weight-bold font-xs text-body-secondary",children:["Ver todos",a.jsx(o,{icon:d,className:"float-end",width:16})]}),icon:a.jsx(o,{icon:U,height:24}),title:"Usuarios",value:y})})]}),a.jsx(p,{children:a.jsx(r,{sm:12,children:a.jsxs(F,{className:"mb-4",children:[a.jsx(L,{children:"Boletas por tiendas"}),a.jsx(I,{children:a.jsx(A,{type:"bar",data:S})})]})})})]})};export{aa as default};
