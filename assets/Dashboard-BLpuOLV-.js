import{R as o,r as d,j as s,L as l}from"./index-BSGErEM6.js";import{a as D,e as f}from"./endpoints-FQ_58ef9.js";import{C as P}from"./index.esm-BxCIZZYt.js";import{c as t}from"./index.esm-DHIEEdvX.js";import{C as u,a as e}from"./CRow-DmcC_b5O.js";import{C as i}from"./CWidgetStatsF-DnKkpxxA.js";import{c as A,a as R,b as v}from"./DefaultLayout-ClxKSXA3.js";import{c}from"./cil-arrow-right-CuetXaPY.js";import{c as k}from"./cil-user-Dlmw-Gem.js";import{C as V,a as _}from"./CCardBody-BoIb-BeF.js";import{C as U}from"./CCardHeader-BjtyZ_kD.js";import"./CCardFooter-B0qIBqVm.js";import"./softys-8HeVkQ7R.js";const X=()=>{const x=`${f.API_BASE_URL}${f.ENDPOINTS.DASHBOARD.GET}`,[m,h]=o.useState(null),[j,C]=o.useState(0),[b,p]=o.useState(0),[g,E]=o.useState(0),[F,N]=o.useState(0),[r,T]=o.useState([]),[w,y]=o.useState({}),S=d.useCallback(async()=>{try{const a=await D.get(x);a.data.success?(C(a.data.data.productos),p(a.data.data.tiendas),E(a.data.data.boletas),N(a.data.data.users),T(a.data.data.boletas_por_tienda)):h(a.data.message)}catch(a){console.error(a),h("Error al obtener los datos")}},[x]);return d.useEffect(()=>{S()},[]),d.useEffect(()=>{if(r.length){const a=r.map(n=>n.name),B=r.map(n=>n.boletas_count);y({labels:a,datasets:[{data:B,backgroundColor:["#FF6384","#36A2EB","#FFCE56","#FFCE56","#FFCE56"],hoverBackgroundColor:["#FF6384","#36A2EB","#FFCE56","#FFCE56","#FFCE56"]}]})}},[r]),s.jsxs(s.Fragment,{children:[m&&s.jsx("div",{className:"alert alert-danger",children:m}),s.jsxs(u,{children:[s.jsx(e,{sm:6,xl:4,xxl:3,children:s.jsx(i,{className:"mb-3",color:"info",footer:s.jsxs(l,{to:"/products/lista",className:"font-weight-bold font-xs text-body-secondary",children:["Ver todos",s.jsx(t,{icon:c,className:"float-end",width:16})]}),icon:s.jsx(t,{icon:A,height:24}),title:"Productos",value:j})}),s.jsx(e,{sm:6,xl:4,xxl:3,children:s.jsx(i,{className:"mb-3",color:"primary",footer:s.jsxs(l,{to:"/tiendas/lista",className:"font-weight-bold font-xs text-body-secondary",children:["Ver todos",s.jsx(t,{icon:c,className:"float-end",width:16})]}),icon:s.jsx(t,{icon:R,height:24}),title:"Tiendas",value:b})}),s.jsx(e,{sm:6,xl:4,xxl:3,children:s.jsx(i,{className:"mb-3",color:"success",footer:s.jsxs(l,{to:"/boletas/lista",className:"font-weight-bold font-xs text-body-secondary",children:["Ver todos",s.jsx(t,{icon:c,className:"float-end",width:16})]}),icon:s.jsx(t,{icon:v,height:24}),title:"Ventas realizadas",value:g})}),s.jsx(e,{sm:6,xl:4,xxl:3,children:s.jsx(i,{className:"mb-3",color:"warning",footer:s.jsxs(l,{to:"/usuarios/lista",className:"font-weight-bold font-xs text-body-secondary",children:["Ver todos",s.jsx(t,{icon:c,className:"float-end",width:16})]}),icon:s.jsx(t,{icon:k,height:24}),title:"Usuarios",value:F})})]}),s.jsx(u,{children:s.jsx(e,{sm:12,xl:6,xxl:4,children:s.jsxs(V,{className:"mb-4",children:[s.jsx(U,{children:"Cantidad de boletas por tienda"}),s.jsx(_,{children:s.jsx(P,{data:w})})]})})})]})};export{X as default};
